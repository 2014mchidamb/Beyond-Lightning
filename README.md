# Beyond-Lightning

**Project Team:** Muthu Chidambaram

**Project Goal:** Understanding the Lightning Network proposal as well as hypothesizing improvements or alternatives to parts (or all) of the proposal.

## Overview of the Lightning Network

**Main Idea:** Transactions that take place on the blockchain are inefficient (have to wait for confirmations). Thus, the idea is to conduct transactions using off-the-blockchain micropayment channels and to only broadcast transactions once a transaction consensus has been reached between the parties involved.

### Micropayment Channels

Consider two parties, Alice and Bob. In order to transact with one another off of the blockchain, Alice and Bob create a 2-of-2 multisig address in which they plan on pooling funds. Furthermore, Alice and Bob also create refund transactions with a specified nLock time from the address (this just means the refund cannot be accessed until after that amount of time), so that they can redeem their funds in the case that no consensus is reached in the set timespan.

#### One-Directional Channel

Without loss of generality, assume that Alice is paying Bob. In a one-directional payment channel, Alice sends some amount of bitcoin to the multisig address after she has generated a refund transaction to herself from the multisig address. Now, Alice can generate and sign transactions from the multisig address that partition the amount of bitcoin in the address between herself and Bob. Alice can generate as many transactions as she wants during the set time period, with each transaction replacing the previous transaction's balance. When Bob is satisfied with the balance, he can sign the transaction and then broadcast it to the blockchain (since it now has both Alice and Bob's signatures). 

To understand this, consider the following example: Alice sends 1 BTC to the multisig address and then signs a transaction sending 0.9 BTC back to herself and 0.1 BTC to Bob. Bob does not sign this transaction. Alice then creates a new transaction sending 0.8 BTC back to herself and 0.2 BTC to Bob, which effectively replaces the old transaction. Bob then chooses to sign this transaction, and then broadcasts it to the blockchain. If Bob does not sign any of the transactions generated by Alice during the agreed upon time span (nLock time for the refund), Alice can redeem her refund transaction.

#### Bidirectional Channel

The aforementioned scheme only allows Alice to send money to Bob. In order for Bob to be able to send money to Alice as well, we introduce an nLock time to the transactions generated from the multisig address. That is, we start an initial transaction with an nLock time that is decremented every time the direction of the transaction is changed.

This can be illustrated by the following example: Alice creates and signs a transaction from the shared multisig address that sends 0.8 BTC back to herself and 0.2 BTC to Bob, with some specified nLock time X. Bob wishes to send 0.1 BTC to Alice, so he creates and signs a new transaction from the multisig address that sends 0.9 BTC to Alice and 0.1 BTC to himself with an nLock time of X-1. Due to the decremented nLock time, Alice can sign this transaction before Bob goes back on his word and signs the previous transaction that sent 0.8 BTC to Alice and 0.2 BTC to Bob.
